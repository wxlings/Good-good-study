# Code Review目的: 提高代码质量,自我检测,加强团队人员对业务实现的掌握

**强制:周期性使用Lint进行检查**

## 命名

1. 类文件,变量/函数的命名需要符合`业务`+`驼峰`的原则

2. 资源文件,组件ID的命名需要符合`业务`+`_`的原则

## 注释

1. 类文件头需要有文件描述信息.

    > 每个类文件都应该有该文件的业务能力作用/注意事项/创建人/创建时间的描述

2. 变量/函数需要有注释说明.

    > 每个变量或者函数都应该有自己的注释说明:变量标记的其作用,函数/方法标记实现的逻辑及业务,尤其是对外可调用的API函数

3. 关键业务的代码需要有注释说明.

    > 业务比较复杂的业务代码需要对不用同业务情况/条件进行描述

## 目录结构

1. 创建的文件是否存放在相关业务模块包下

    > 例如数据对象bean应放置于`wshifu/app/android/bean/`下

## 资源包引入

1. 特定资源包的引入需要增加业务方向注释说明及使用安全检查

    > 对于安全检查,需要自行评估,是否需要try...catch操作

## 资源释放

1. 当页面退出或者组件销毁时需要对资源进行强释放

    > 使用的注册监听器BroadCastReceiver,订阅者RxJava,观察者Obsever,异步消息对象Handler等需要强释放等
    > 网络请求需要进行release,需要调用`Okgo.getInstance().callTag(this)`进行终端网络请求
    > 较大对象例如`Adapter`,`Activity`的实例等强制置为`null`

2. 数据库的游标Cursor及事物需要

3. 数据流需要关闭

    > 对文件等数据流操作完成后需要将其关闭`Stream.Close()`

4. 操作Bitmap完成后需要进行代码显示回收

    > 对Bitmap单独处理时完成后需要显示调用`Bitmap.recycle()`加快对内存的释放

## 安全

1. 工具类/或者工具函数需要进行空条件判断,减少NPE的发生

    > 尤其针对网络返回数据

2. 使用`Intent`进行组件间传递数据,优先使用`Parceable`,数据不可超过1M-8k

3. 使用隐式意图打开页面时须使用`if (getPackageManager().resolveActivity(){}`进行页面检查

4. App内发送广播时使用`LocalBroadcastManager`,注意消息传递安全

5. EventBus进行数据传递时,禁止使用公共Bean对象

    > 需要针对不用业务创建不用的事件Bean类型

6. 网络请求如果使用了`DialogCallback`,需要关闭`Dialog Window`后进行`Activity`跳转

7. 由集合查数据时注意`break`和`return`的使用

    > 遍历集合时,如果`if(condition){}`成立应停止继续遍历

## 布局加载

1. 布局文件避免过多嵌套,使用扁平化布局组件例如`ConstrainLayout`,`RelativeLayout`,目的减少对View组件的递归计算

2. 优先使用`include`,`ViewStub`,`merge`进行布局文件及延时等优化

## 代码格式化

建议: 对代码格式话问题建议代码编辑完成后使用系统的`control + alt + L`快捷键,用来对空格/空行/缩进/大括号等进行优化
